(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7vJP":function(e,t,s){"use strict";s.r(t),s.d(t,"HomeModule",(function(){return oe}));var i=s("tyNb"),n=s("ofXK");const r="https://stage.whgstage.com/front-end-test/";var o=function(e){return e.Ball="ball",e.Blackjack="blackjack",e.Classic="classic",e.Fun="fun",e.New="new",e.Poker="poker",e.Roulette="roulette",e.Slots="slots",e.Top="top",e.Virtual="virtual",e.Other="other",e}({});const a=[o.Fun,o.Ball,o.Virtual],c={[o.Top]:3,[o.New]:2,[o.Slots]:1},l={[o.Top]:"Top Games",[o.New]:"New Games"};var h=s("XNiG"),u=s("HDdC"),p=s("quSY");class d extends p.a{constructor(e,t){super()}schedule(e,t=0){return this}}class g extends d{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const s=this.id,i=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(i,s,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,s=0){return setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!==s&&this.delay===s&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s=!1,i=void 0;try{this.work(e)}catch(n){s=!0,i=!!n&&n||new Error(n)}if(s)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,s=t.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&s.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let b=(()=>{class e{constructor(t,s=e.now){this.SchedulerAction=t,this.now=s}schedule(e,t=0,s){return new this.SchedulerAction(this,e).schedule(s,t)}}return e.now=()=>Date.now(),e})();class f extends b{constructor(e,t=b.now){super(e,()=>f.delegate&&f.delegate!==this?f.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,s){return f.delegate&&f.delegate!==this?f.delegate.schedule(e,t,s):super.schedule(e,t,s)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let s;this.active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}const m=new f(g);var v=s("DH7j");function x(e){return!Object(v.a)(e)&&e-parseFloat(e)+1>=0}var w=s("z+Ro");function y(e){const{index:t,period:s,subscriber:i}=e;if(i.next(t),!i.closed){if(-1===s)return i.complete();e.index=t+1,this.schedule(e,s)}}var _=s("l7GE"),C=s("ZUHj");class k{constructor(e){this.notifier=e}call(e,t){const s=new O(e),i=Object(C.a)(s,this.notifier);return i&&!s.seenValue?(s.add(i),t.subscribe(s)):s}}class O extends _.a{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,s,i,n){this.seenValue=!0,this.complete()}notifyComplete(){}}var I=s("fXoL");const j=(e,t)=>{const s=c[e]||0,i=c[t]||0;return s>i?-1:i>s?1:0};var M=s("2Vo4");class P extends g{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!==s&&s>0||null===s&&this.delay>0?super.requestAsyncId(e,t,s):e.flush(this)}}class G extends f{}const N=new G(P);var $=s("7o/Q"),S=s("EY2u"),T=s("LRne");let E=(()=>{class e{constructor(e,t,s){this.kind=e,this.value=t,this.error=s,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,s){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return s&&s()}}accept(e,t,s){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,s)}toObservable(){switch(this.kind){case"N":return Object(T.a)(this.value);case"E":return e=this.error,new u.a(t=>t.error(e));case"C":return Object(S.b)()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class A extends $.a{constructor(e,t,s=0){super(e),this.scheduler=t,this.delay=s}static dispatch(e){const{notification:t,destination:s}=e;t.observe(s),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(A.dispatch,this.delay,new J(e,this.destination)))}_next(e){this.scheduleMessage(E.createNext(e))}_error(e){this.scheduleMessage(E.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(E.createComplete()),this.unsubscribe()}}class J{constructor(e,t){this.notification=e,this.destination=t}}var Y=s("9ppp"),V=s("Ylt2");class B extends h.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new F(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,n=s.length;let r;if(this.closed)throw new Y.a;if(this.isStopped||this.hasError?r=p.a.EMPTY:(this.observers.push(e),r=new V.a(this,e)),i&&e.add(e=new A(e,i)),t)for(let o=0;o<n&&!e.closed;o++)e.next(s[o]);else for(let o=0;o<n&&!e.closed;o++)e.next(s[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r}_getNow(){return(this.scheduler||N).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,i=this._events,n=i.length;let r=0;for(;r<n&&!(e-i[r].time<s);)r++;return n>t&&(r=Math.max(r,n-t)),r>0&&i.splice(0,r),i}}class F{constructor(e,t){this.time=e,this.value=t}}var z=s("vkgz"),L=s("tk/3");let R=(()=>{class e{constructor(e){this.httpClient=e,this.activeCategory$=new M.a(null),this.categories$=new B,this.visibleGames$=new B,this.groupedGames={}}get visibleGames(){return this.activeCategory$.value?this.filteredGames:this.allGames}get filteredGames(){return e=this.allGames,null===(t=this.groupedGames[this.activeCategory$.value])||void 0===t?void 0:t.map(t=>e.find(e=>e.id===t));var e,t}loadGames(){this.allGames?this.visibleGames$.next(this.visibleGames):this.httpClient.get(r+"/games.php").pipe(Object(z.a)(e=>this.allGames=e),Object(z.a)(()=>this.groupGamesByCategories()),Object(z.a)(()=>this.visibleGames$.next(this.visibleGames)),Object(z.a)(()=>this.prepareCategories())).subscribe()}setCategory(e){this.activeCategory$.next(e),this.loadGames()}groupGamesByCategories(){this.groupedGames=(e=>{const t={};return this.allGames.forEach(e=>{e.categories.forEach(s=>{if(a.includes(s))return t[o.Other]?void(t[o.Other]=[...t[o.Other],e.id]):void(t[o.Other]=[e.id]);t[s]?t[s].push(e.id):t[s]=[e.id]})}),t})()}prepareCategories(){this.categories$.next(Object.keys(this.groupedGames).sort(j))}}return e.\u0275fac=function(t){return new(t||e)(I.Mb(L.a))},e.\u0275prov=I.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),W=(()=>{class e{constructor(e){this.httpClient=e,this.jackpots$=new M.a([])}updateJackpots(){this.httpClient.get(r+"jackpots.php").pipe(Object(z.a)(e=>this.jackpots$.next(e))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(I.Mb(L.a))},e.\u0275prov=I.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function D(e,t){if(1&e){const e=I.Kb();I.Jb(0,"a",2),I.Qb("click",(function(){I.bc(e);const s=t.$implicit;return I.Ub().onCategoryClick(s)})),I.Jb(1,"span",3),I.gc(2),I.Ib(),I.Ib()}if(2&e){const e=t.$implicit,s=I.Ub();I.yb("categories__element--active",s.isActiveCategory(e)),I.wb(2),I.hc(s.getCategoryLabel(e))}}let H=(()=>{class e{constructor(e){this.router=e}onCategoryClick(e){this.router.navigateByUrl(this.getCategoryLink(e),{skipLocationChange:!1})}getCategoryLink(e){return"/category/"+e}isActiveCategory(e){return e===this.activeCategory}getCategoryLabel(e){return l[e]||e}}return e.\u0275fac=function(t){return new(t||e)(I.Gb(i.a))},e.\u0275cmp=I.Ab({type:e,selectors:[["app-categories"]],inputs:{categories:"categories",activeCategory:"activeCategory"},decls:2,vars:1,consts:[[1,"categories"],["class","categories__element element",3,"categories__element--active","click",4,"ngFor","ngForOf"],[1,"categories__element","element",3,"click"],[1,"element__label"]],template:function(e,t){1&e&&(I.Jb(0,"nav",0),I.ec(1,D,3,3,"a",1),I.Ib()),2&e&&(I.wb(1),I.Yb("ngForOf",t.categories))},directives:[n.j],styles:["[_nghost-%COMP%]{display:flex;border-top:25px solid #000}.categories[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;background:#373737;color:#fcfcfc;flex-flow:row wrap;font-size:22px}@media (max-width:1199px){.categories[_ngcontent-%COMP%]{font-size:16px}}@media (max-width:768px){.categories[_ngcontent-%COMP%]{font-size:14px}}.categories__element[_ngcontent-%COMP%]{color:#fcfcfc;text-decoration:none;padding:15px 35px;text-transform:capitalize;text-align:center}@media (max-width:1199px){.categories__element[_ngcontent-%COMP%]{flex:1}}@media (max-width:768px){.categories__element[_ngcontent-%COMP%]{padding:15px 30px}}.categories__element[_ngcontent-%COMP%]:hover{cursor:pointer;background:#8dc63f}.categories__element--active[_ngcontent-%COMP%]{background:#8dc63f;pointer-events:none}"],changeDetection:0}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Ab({type:e,selectors:[["app-game-label"]],inputs:{label:"label"},decls:7,vars:1,consts:[[1,"game-label__btn","btn"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"btn__icon"],["d","M15 12.3301L9 16.6603L9 8L15 12.3301Z","fill","currentColor"],[1,"btn__label"],[1,"game-label__text"]],template:function(e,t){1&e&&(I.Jb(0,"div",0),I.Tb(),I.Jb(1,"svg",1),I.Hb(2,"path",2),I.Ib(),I.Sb(),I.Jb(3,"span",3),I.gc(4,"PLAY"),I.Ib(),I.Ib(),I.Jb(5,"span",4),I.gc(6),I.Ib()),2&e&&(I.wb(6),I.hc(t.label))},styles:["[_nghost-%COMP%]{align-items:center;background:rgba(0,0,0,.75);bottom:0;color:#fcfcfc;display:flex;height:40px;justify-content:center;left:0;margin:auto;pointer-events:none;position:absolute;right:0;top:0;width:98%}.game-label__text[_ngcontent-%COMP%], [_nghost-%COMP%]:hover{cursor:pointer}.btn[_ngcontent-%COMP%]{background:#8dc63f;display:flex;padding:2px 10px 2px 2px;border-radius:10px;margin-right:9px;font-size:14px;font-weight:700;align-items:center}.btn__icon[_ngcontent-%COMP%]{color:#fcfcfc}.btn__label[_ngcontent-%COMP%]{text-transform:uppercase}"],changeDetection:0}),e})();function q(e,t){1&e&&(I.Jb(0,"div",2),I.Jb(1,"span",3),I.gc(2,"top"),I.Ib(),I.Ib())}function X(e,t){1&e&&(I.Jb(0,"div",2),I.Jb(1,"span",3),I.gc(2,"new"),I.Ib(),I.Ib())}function K(e,t){if(1&e&&I.ec(0,X,3,0,"div",4),2&e){const e=I.Ub();I.Yb("ngIf",e.shouldAddNewRibbon)}}let Q=(()=>{class e{get shouldAddNewRibbon(){return this.shouldShowRibbon(o.New)}get shouldAddTopRibbon(){return this.shouldShowRibbon(o.Top)}shouldShowRibbon(e){var t;return(!this.activeCategory||this.activeCategory!==e)&&(null===(t=this.game)||void 0===t?void 0:t.categories.includes(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Ab({type:e,selectors:[["app-game-ribbon"]],inputs:{activeCategory:"activeCategory",game:"game"},decls:3,vars:2,consts:[["class","ribbon",4,"ngIf","ngIfElse"],["newRibbon",""],[1,"ribbon"],[1,"ribbon__label"],["class","ribbon",4,"ngIf"]],template:function(e,t){if(1&e&&(I.ec(0,q,3,0,"div",0),I.ec(1,K,1,1,"ng-template",null,1,I.fc)),2&e){const e=I.ac(2);I.Yb("ngIf",t.shouldAddTopRibbon)("ngIfElse",e)}},directives:[n.k],styles:['.ribbon[_ngcontent-%COMP%]{width:128px;height:87px;overflow:hidden;position:absolute;top:-6px;right:-7px;z-index:2;cursor:pointer;pointer-events:none}.ribbon[_ngcontent-%COMP%]:after, .ribbon[_ngcontent-%COMP%]:before{position:absolute;z-index:-1;content:"";display:block;border-color:transparent transparent #006400 #006400;border-style:solid;border-width:5px}.ribbon[_ngcontent-%COMP%]:before{top:0;left:42px}.ribbon[_ngcontent-%COMP%]:after{bottom:1px;right:0}.ribbon__label[_ngcontent-%COMP%]{position:absolute;display:block;width:162px;padding:4px 0;background-color:#8dc63f;box-shadow:0 2px 10px rgba(0,0,0,.1);color:#fcfcfc;font:700 18px/1 Lato,sans-serif;text-shadow:0 1px 1px rgba(0,0,0,.2);text-transform:uppercase;text-align:center;left:14px;top:22px;transform:rotate(45deg)}'],changeDetection:0}),e})();function Z(e,t){if(1&e&&(I.Jb(0,"span",6),I.gc(1),I.Vb(2,"currency"),I.Ib()),2&e){const e=I.Ub(2);I.wb(1),I.hc(I.Xb(2,1,e.jackpot,e.jackpotCurrency))}}function ee(e,t){if(1&e&&(I.Jb(0,"div",1),I.Hb(1,"img",2),I.ec(2,Z,3,4,"span",3),I.Hb(3,"app-game-label",4),I.Hb(4,"app-game-ribbon",5),I.Ib()),2&e){const e=I.Ub();I.wb(1),I.Yb("src",e.game.image,I.cc),I.wb(1),I.Yb("ngIf",e.jackpot),I.wb(1),I.Yb("label",e.game.name),I.wb(1),I.Yb("game",e.game)("activeCategory",e.activeCategory)}}let te=(()=>{class e{constructor(){this.jackpotCurrency="GBP"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Ab({type:e,selectors:[["app-game"]],inputs:{activeCategory:"activeCategory",game:"game",jackpot:"jackpot"},decls:1,vars:1,consts:[["class","game",4,"ngIf"],[1,"game"],["alt","game image",1,"game__image",3,"src"],["class","game__jackpot",4,"ngIf"],[1,"game__label",3,"label"],[3,"game","activeCategory"],[1,"game__jackpot"]],template:function(e,t){1&e&&I.ec(0,ee,5,5,"div",0),2&e&&I.Yb("ngIf",t.game)},directives:[n.k,U,Q],pipes:[n.d],styles:[".game[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:16px 8px;position:relative}.game[_ngcontent-%COMP%]:hover   .game__label[_ngcontent-%COMP%]{opacity:1}.game--top[_ngcontent-%COMP%]{border:2px solid red}.game--new[_ngcontent-%COMP%]{border:2px solid #00f}.game__image[_ngcontent-%COMP%]{border-radius:15px;border:3px solid transparent;box-shadow:7px 9px 5px -2px rgba(0,0,0,.34);width:260px;height:154px}.game__image[_ngcontent-%COMP%]:hover{border:3px solid #8dc63f;cursor:pointer}.game__label[_ngcontent-%COMP%]{opacity:0;transition:all .3s ease-in-out}.game__jackpot[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);color:#fcfcfc;font-weight:700;padding:10px;position:absolute;text-align:center;left:0;max-width:90%;margin-left:auto;pointer-events:none;z-index:1;right:0;top:4px;overflow:hidden;border-radius:10px;margin-right:auto}"],changeDetection:0}),e})();function se(e,t){if(1&e&&(I.Hb(0,"app-game",1),I.Vb(1,"async")),2&e){const e=t.$implicit,s=I.Ub();I.Yb("game",e)("jackpot",s.getGameJackpot(e))("activeCategory",I.Wb(1,3,s.activeCategory$))}}let ie=(()=>{class e{constructor(e){this.gamesService=e,this.jackpots=[],this.games$=this.gamesService.visibleGames$,this.activeCategory$=this.gamesService.activeCategory$}getGameJackpot(e){var t;return(null===(t=this.jackpots.find(t=>t.game===e.id))||void 0===t?void 0:t.amount)||0}trackByGameId(e){return e.id}}return e.\u0275fac=function(t){return new(t||e)(I.Gb(R))},e.\u0275cmp=I.Ab({type:e,selectors:[["app-games-list"]],inputs:{jackpots:"jackpots"},decls:2,vars:4,consts:[[3,"game","jackpot","activeCategory",4,"ngFor","ngForOf","ngForTrackBy"],[3,"game","jackpot","activeCategory"]],template:function(e,t){1&e&&(I.ec(0,se,2,5,"app-game",0),I.Vb(1,"async")),2&e&&I.Yb("ngForOf",I.Wb(1,2,t.games$))("ngForTrackBy",t.trackByGameId)},directives:[n.j,te],pipes:[n.b],styles:["[_nghost-%COMP%]{display:flex;margin:20px auto;width:90%;align-self:center;flex-flow:row wrap;justify-content:center}"],changeDetection:0}),e})(),ne=(()=>{class e{constructor(e,t){this.gamesService=e,this.jackpotService=t,this.categories$=this.gamesService.categories$,this.activeCategory$=this.gamesService.activeCategory$,this.jackpots$=this.jackpotService.jackpots$,this.destroy$=new h.a}ngOnInit(){var e;this.gamesService.loadGames(),function(e=0,t,s){let i=-1;return x(t)?i=Number(t)<1?1:Number(t):Object(w.a)(t)&&(s=t),Object(w.a)(s)||(s=m),new u.a(t=>{const n=x(e)?e:+e-s.now();return s.schedule(y,n,{index:0,period:i,subscriber:t})})}(0,5e3).pipe((e=this.destroy$,t=>t.lift(new k(e)))).subscribe(()=>this.jackpotService.updateJackpots())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(I.Gb(R),I.Gb(W))},e.\u0275cmp=I.Ab({type:e,selectors:[["app-home"]],decls:5,vars:9,consts:[[3,"categories","activeCategory"],[3,"jackpots"]],template:function(e,t){1&e&&(I.Hb(0,"app-categories",0),I.Vb(1,"async"),I.Vb(2,"async"),I.Hb(3,"app-games-list",1),I.Vb(4,"async")),2&e&&(I.Yb("categories",I.Wb(1,3,t.categories$))("activeCategory",I.Wb(2,5,t.activeCategory$)),I.wb(3),I.Yb("jackpots",I.Wb(4,7,t.jackpots$)))},directives:[H,ie],pipes:[n.b],styles:["[_nghost-%COMP%]{background:#fff;display:block;width:100%}"],changeDetection:0}),e})();const re=[{path:"",component:ne,pathMatch:"full"},{path:"category/:categoryId",component:ne,resolve:{CategoryResolver:(()=>{class e{constructor(e){this.gamesService=e}resolve(e){const{categoryId:t}=e.params;return this.gamesService.setCategory(t),Object(T.a)(null)}}return e.\u0275fac=function(t){return new(t||e)(I.Mb(R))},e.\u0275prov=I.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}];let oe=(()=>{class e{}return e.\u0275mod=I.Eb({type:e}),e.\u0275inj=I.Db({factory:function(t){return new(t||e)},imports:[[n.c,i.b.forChild(re)]]}),e})()}}]);